# Tableau 四、标靶图、甘特图、瀑布图

Created: April 3, 2022 7:52 AM
Tags: Dr. Fangli Ying

标靶图是在条形图的基础上增加参考线和参考区间，可以了解两个度量之间的关系，通常用来比较计划值和实际值，看有没有达到计划的标准。

### 1.1 二月份电量销售额完成情况

打开“2014年各省市售电量.xlsx”。

过一下数据。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616152446250.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616152446250.png)

在将工作表重命名为“二月份电量销售额完成情况”。在工作表里，将【统计周期】放到【筛选器】里，双击【月】，勾选【二月】。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616152609965.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616152609965.png)

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616152627483.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616152627483.png)

将【省市】放到【列】中，将【当期值】放到【行】中。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616152843729.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616152843729.png)

选择【整个视图】，选择【交换行和列】。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616153016361.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616153016361.png)

### 添加参考线

下图表下方右击——【添加参考线】，其中【线】和【区间】最常用。默认范围是【每区】。

“区”就是“行”的意思，这里行只有一个区，也就是【省市】，每区和整个表是一样的。如果不一样，比如说有南方省市和北方省市，则有两个区。

点击【线】和【每区】，就发现有一条线，显示的是二月份所有省市的当期值总计的平均值线。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616154014952.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616154014952.png)

点击【每单元格】，就发现条形图里的每条都有个平均值线。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616154206334.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616154206334.png)

【线】——【值】中可以选择各种计算值，这里选择【平均值】，【标签】是参考线显示什么值，也可以不显示。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616154816662.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616154816662.png)

### 添加月度计划值

标靶图是要看【月度计划值】和【当期值】之间的完成情况。

将【月度计划值】拖到【详细信息】中，点击参考线，【编辑】，则【线】——【值】下有【总和(月度计划值)】

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616155233567.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616155233567.png)

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616155303947.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616155303947.png)

选择【线】，【每单元格】和【总和(月度计划值)】，单击确定。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616155625208.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616155625208.png)

【格式】下选择粗线，黑色。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616212605419.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616212605419.png)

### 添加参考分布

右击图表下方，【添加参考线】（注意是添加）。点击【分布】。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616160414340.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616160414340.png)

为便于理解，点击【值】，改为【50,100】。

右击图表下方，【添加参考线】（注意是添加）。点击【线】，【每区】，【平均值】。

发现分布的最右边就是平均值线，也就是100%平均值，最左边是50%的平均值。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616160754466.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616160754466.png)

点击平均值线，【移除】，从而删除平均值线。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616161040669.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616161040669.png)

点击图表中的分布，【编辑】，【标签】可以选择【无】、【值】、【计算】和【自定义】。【线】可以选择粗细和颜色。【填充】可以选择颜色。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616161223144.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616161223144.png)

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616161352913.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616161352913.png)

右击图表下方，可以编辑和删除所选择的参考线。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616161628711.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616161628711.png)

### 四分位数

右击图表下方，【编辑参考线】——【50%,100%/平均值】，选择【值】——【分位数】，【图块数】选4，点击确定。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616161842494.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616161842494.png)

右击图表下方，【编辑参考线】——【四分位点】，选择【值】——【百分比】，【百分比】下选择【总和(月度计划值)】，在选择【分位数】，图块数选择4。这就是月度计划值的四分位数。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/2021061621271177.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/2021061621271177.png)

### 2. Tableau制作甘特图

### 2.1 甘特图的概念和用途

甘特图又叫横道图，是以图示的形式表达活动列表和时间刻度，能够表达一个项目的顺序和持续时间，主要用于项目管理里。

### 2.2 交货延期情况的甘特图

打开‘物资采购情况.xlsx’。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616173858286.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616173858286.png)

新建工作表，重命名为“ 交货延期情况甘特图”

【计划交货日期】拖到【列】，点击下拉三角中的【天】（选择下边那个【天】，上边那个【天】是把日期单独拿出来作为数字的一种符号）。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616174108298.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616174108298.png)

将【供应商名称】和【物资类别】放到【行】上。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616174306198.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616174306198.png)

### 创造计算字段

【实际交货日期】右击【创建】——【计算字段】。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616174644880.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616174644880.png)

字段名称为【延迟天数】，输入计算，点击【确定】，这样【度量】下出现【延迟天数】字段。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616174822508.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616174822508.png)

将【延迟天数】拖到【大小】上。图表中长条的起点是计划交货日期，长度是延迟天数。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616175026692.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616175026692.png)

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616175239685.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616175239685.png)

但延迟天数有正有负。如何区别？将【延伸天数】拖到【颜色】上，点击【颜色】——【编辑颜色】——【渐变颜色】选择2，勾选【倒序】。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616175510182.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616175510182.png)

交换【行】里【物资类别】和【供应商名称】，可以看每个物资的交货延迟情况。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616175758825.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616175758825.png)

### 2.3 不同的日期类型选择

做甘特图时，日期选择【天】有两个，选择下边那个【天】，上边那个【天】是把日期单独拿出来作为数字的一种符号。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616180540436.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616180540436.png)

下边那个【天】的甘特图，这个【天】是绿色。这种甘特图是正确的。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616180716725.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616180716725.png)

上边那个【天】的甘特图，这个【天】是蓝色。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616180818478.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616180818478.png)

### 3.创建超市不同子类别产品的盈亏瀑布图

打开“全球超市订单数据.xlsx”。

这次有两个工作表，【人员】和【订单】。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616182049679.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616182049679.png)

将【人员】工作表拖到右边，再将【订单】工作表拖到右边，点击中间的交集，可以看出两者是inner join（内连接），通过地区连接。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616182253758.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616182253758.png)

新建工作表，命名为“超市不同子类别产品的盈亏瀑布图”。

将【子类别】拖到【列】中，将【利润】拖到【行】中。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616204930716.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616204930716.png)

按照升序排列条形图。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616205117892.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616205117892.png)

### 汇总

点击【总和(利润)】的下拉三角框——【快速表计算】——【汇总】。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/2021061620521033.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/2021061620521033.png)

将【利润】放到【标签】上。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616205513812.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616205513812.png)

点击【标记】下【总和(利润)】的下拉框，【设置格式】，【区】——【数字】——【数字(自定义)】——【小数位数】为0，显示单位为【千(K)】

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616205605531.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616205605531.png)

条形图的标签是利润情况，但是条形图是按照累计排列，每个条形都是累计上前面的数值的。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/202106162100019.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/202106162100019.png)

### 甘特条形图

【标记】下【自动】里选择【甘特条形图】。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616210145653.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616210145653.png)

### 创建【长方形高度】字段

【度量】下右击【利润】——【创建】——【计算字段】，

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616210411514.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616210411514.png)

命名为【长方形高度】，取值为【-[利润]】。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616210514829.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616210514829.png)

【度量】下【长方形高度】放到【大小】上。

### 【利润】汇总

将【度量】下【利润】放到【颜色】上，右击颜色的【总和(利润)】——【快速表计算】——【汇总】。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616211231267.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616211231267.png)

点击【颜色】——【编辑颜色】——色阶选【2】，中心为【0】，也就是小于0 为红色，大于0为蓝色。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616211442161.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616211442161.png)

### 分析合计

【分析】——【合计】——【显示行总和】，这样在右边显示利润总和。

### 注意

带三角符号说明进行了汇总。

![Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616212255990.png](Tableau%20%E5%9B%9B%E3%80%81%203bcd4/20210616212255990.png)