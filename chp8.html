
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tableau 八、数据分层、数据分组、数据集 &#8212; 商业数据挖掘</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tableau 九、计算字段与表计算：粒度、聚合与比率" href="chp9.html" />
    <link rel="prev" title="Tableau 七、多边形地图和背景图地图：设置地理信息（自定义地图码导入、设置地图源）" href="chp7.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">商业数据挖掘</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Welcome to Business Data Science
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="chp1.html">
   Tableau 一、简介、条形图和直方图
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp2.html">
   Tableau 二、数据前处理、折线图、饼图
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp3.html">
   Tableau 三. 基本表、树状图、气泡图、词云
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp4.html">
   Tableau 四、标靶图、甘特图、瀑布图
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp5.html">
   Tableau 五、进阶：数据集合并、符号地图、智能显示、插入自定义形状、仪表盘
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp6.html">
   Tableau 六、填充地图、多维地图、混合地图
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp7.html">
   Tableau 七、多边形地图和背景图地图：设置地理信息（自定义地图码导入、设置地图源）
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Tableau 八、数据分层、数据分组、数据集
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp9.html">
   Tableau 九、计算字段与表计算：粒度、聚合与比率
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp10.html">
   Tableau 十、人口金字塔、漏斗图、箱线图
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp11.html">
   Tableau 十一、范围-线图、倾斜图
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp12.html">
   Tableau 十二、网络图与弧线图
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp13.html">
   Tableau 十三、雷达图与凹凸图
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chp14.html">
   Tableau 十四、回归分析与时间序列分析
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/chp8.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   1.数据分层（层级）结构
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   1.1分层结构的概念与意义
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   1.2分层结构的创建与使用案例
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id4">
   中心和人工服务接听量柱形图
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id5">
   中心、日期和平均呼入通话时长折线图
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id6">
   第二种创建分层结构方式
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id7">
   2.数据分组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id8">
   2.1数据组创建及使用
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id9">
   创建分组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id10">
   编辑组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id11">
   查找和分组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id12">
   修改图表
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id13">
   2.2电量销售数据按地理区域分组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id14">
   建立地图
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id15">
   套索选择和建组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id16">
   填充地图
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id17">
   各区域用电量标靶图
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id18">
   3.1数据集的相关概念
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id19">
   3.2创建数据集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id20">
   创建静态数据集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id21">
   创建动态数据集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id22">
   通过排序方式创建动态数据集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id23">
   合并集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id24">
   通过筛选器创建数据集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id25">
   数据集用于分层结构
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id26">
   3.3使用集做对比分析
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Tableau 八、数据分层、数据分组、数据集</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   1.数据分层（层级）结构
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   1.1分层结构的概念与意义
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   1.2分层结构的创建与使用案例
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id4">
   中心和人工服务接听量柱形图
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id5">
   中心、日期和平均呼入通话时长折线图
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id6">
   第二种创建分层结构方式
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id7">
   2.数据分组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id8">
   2.1数据组创建及使用
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id9">
   创建分组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id10">
   编辑组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id11">
   查找和分组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id12">
   修改图表
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id13">
   2.2电量销售数据按地理区域分组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id14">
   建立地图
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id15">
   套索选择和建组
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id16">
   填充地图
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id17">
   各区域用电量标靶图
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id18">
   3.1数据集的相关概念
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id19">
   3.2创建数据集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id20">
   创建静态数据集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id21">
   创建动态数据集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id22">
   通过排序方式创建动态数据集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id23">
   合并集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id24">
   通过筛选器创建数据集
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id25">
   数据集用于分层结构
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id26">
   3.3使用集做对比分析
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="tableau">
<h1>Tableau 八、数据分层、数据分组、数据集<a class="headerlink" href="#tableau" title="Permalink to this headline">¶</a></h1>
<p>Created: April 3, 2022 7:53 AM
Tags: Dr. Fangli Ying</p>
<div class="section" id="id1">
<h2>1.数据分层（层级）结构<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id2">
<h2>1.1分层结构的概念与意义<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>分层结构是<a class="reference external" href="https://so.csdn.net/so/search?q=%E7%BB%B4%E5%BA%A6&amp;spm=1001.2101.3001.7020">维度</a>之间自上而下的组织形式。</p>
<p><a class="reference external" href="https://so.csdn.net/so/search?q=Tableau&amp;spm=1001.2101.3001.7020">Tableau</a>默认包含对某些字段的分层结构，比如日期、时间、地理角色。</p>
<p>以日期为例，包含年、季度、月、日等数据分层结构。</p>
<p>打开“全球超市订单数据.xlsx”。</p>
<p>将两个工作表数据拖到右侧。联结为内部联结。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210624182745645.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210624182745645.png" /></p>
<p>将【利润】拖到【行】，将【订单日期】拖到【列】，点击【年(订购日期)】右侧的＋，会往下分层（称之为<strong>下钻</strong>），并变成-，点击-，会把层折叠（称为<strong>上钻</strong>）。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210624183141842.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210624183141842.png" /></p>
</div>
<div class="section" id="id3">
<h2>1.2分层结构的创建与使用案例<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>打开“人工坐席接听数据.xlsx”。</p>
</div>
<div class="section" id="id4">
<h2>中心和人工服务接听量柱形图<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>新建工作表2，右击【中心】——【分层结构】——【创建分层结构】。</p>
<p>命名为【层级】。</p>
<p>【维度】下变化如下</p>
<p>将字段【部】、【组】、【班】，拖到【中心】下面，注意顺序，上下顺序就是层级顺序。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625095540477.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625095540477.png" /></p>
<p>将【中心】放到【列】中，将【人工服务接听量】放到【行】中，将【人工服务接听量】放到【标签】上。</p>
<p>点击【整个视图】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625100012655.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625100012655.png" /></p>
<p>右击【总和(人工服务接听量)】——【设置格式】，点击【数字】</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/2021062510024888.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/2021062510024888.png" /></p>
<p>【数字(自定义)】，设置小数位数为0，【显示单位】为千。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625100406549.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625100406549.png" /></p>
<p>点击【列】里的【中心】左边的+，逐级下钻，进行分析，发现有【未知】字段数据太高，属于异常，排除掉。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/2021062510080674.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/2021062510080674.png" /></p>
<p>点击【未知】的柱形，点击【排除】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625100939869.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625100939869.png" /></p>
<p>分析发现有两个班的数据比较高。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625101121118.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625101121118.png" /></p>
</div>
<div class="section" id="id5">
<h2>中心、日期和平均呼入通话时长折线图<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>新建工作表3，将【日期】拖入【列】，选择格式为【天】。</p>
<p>将【中心】拖入【行】，将【平均呼入通话时长】拖入行。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625101704850.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625101704850.png" /></p>
<p>点击【中心】左边的+，下钻到【部】，并继续下钻，可以到【组】，到【班】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625101840479.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625101840479.png" /></p>
<p>不想用层级的话，右击【移除分层结构】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625102034856.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625102034856.png" /></p>
</div>
<div class="section" id="id6">
<h2>第二种创建分层结构方式<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>将字段【部】拖到字段【中心】上，自动打开【创建分层结构】，命名为【层级】。如果字段上下顺序不对，则拖动调整。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625102315453.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625102315453.png" /></p>
<p>右击【组】——【分层结构】——【添加到分层结构】，选择【层级】，则自动排到【层级】的最下面。</p>
<p>不想【组】在层级里，就直接把【组】往外拖。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625102454737.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625102454737.png" /></p>
<p>注意，层级不能嵌套，但可以并列。</p>
<p>比如新建【层级2】，【层级2】不能放到【层级】里面。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625102844113.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625102844113.png" /></p>
</div>
<div class="section" id="id7">
<h2>2.数据分组<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id8">
<h2>2.1数据组创建及使用<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>组是维度成员或度量的离散值的组合。</p>
<p>通过分组，可以实现维度成员的重新组合，以及度量值按范围的分类。</p>
<p>字段图标是回形针图标。</p>
<p>在Tableau里，归类重组维度成员有很多种方式，分组是其中最常见和最快速方式。</p>
<p>注意，组不能创建计算字段，不能出现在公式中。</p>
<p>新建工作表4。</p>
<p>将【班】拖到行中，将【人工服务接听量】放到列中。点击【交换行和列】。</p>
<p>发现13班和13班（15批新人）属于一个班。其他也有可以合到一个组的情况。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625103757861.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625103757861.png" /></p>
</div>
<div class="section" id="id9">
<h2>创建分组<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>创建分组有两种方式：</p>
<p>一是右击【班】——【创建】——【组】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625104145732.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625104145732.png" /></p>
<p>二是在图形里右击【组】（注意，要点击图形，而不是字段）。这里使用第二种方法。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/2021062510424210.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/2021062510424210.png" /></p>
<p>出现【创建组】的对话框，点击【应用】和【确定】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625104832909.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625104832909.png" /></p>
</div>
<div class="section" id="id10">
<h2>编辑组<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<p>右击带有回形针图标的【班(组)】——【编辑组】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625104518273.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625104518273.png" /></p>
<p>将【13班(15批新人)】拖到组【13班】下，如果组名不合适，可以右击组名——【重命名】。</p>
<p>按ctrl键，选择【15班】和【15期新人】，点击【分组】，则新建一组。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625105241646.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625105241646.png" /></p>
</div>
<div class="section" id="id11">
<h2>查找和分组<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>如果字段名称太多，点击【查找】，查找方式有三种</p>
<ul class="simple">
<li><p>包含，属于模糊查找，包含这个字就能找到</p></li>
<li><p>开头为，则字段开头必须为这个字</p></li>
<li><p>精确匹配，则查找字为全部字段。</p></li>
</ul>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625105510344.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625105510344.png" /></p>
<p>【范围】是查找范围，指的是全部查询还是在某个组内查询，一般选全部。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625105836355.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625105836355.png" /></p>
<p>想找到所有常白班，【查找成员】输入【白】，【包含】，【范围】选【全部】。点击【查找全部】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625110048902.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625110048902.png" /></p>
<p>找到后，默认结果是被选中的，点击【分组】，重命名为【常白班】。</p>
<p>同样，对【运行班】分组。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625110417506.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625110417506.png" /></p>
<p>将一些字段分组，称为【其他班】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625110554758.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625110554758.png" /></p>
</div>
<div class="section" id="id12">
<h2>修改图表<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<p>将【班】拖走，将【班分组】拖到【列】中。点击【交互行和列】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625110854449.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625110854449.png" /></p>
<p>右击【班分组】，去掉勾选【包含“其他”】</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625111159590.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625111159590.png" /></p>
<p>点击【降序】，点击【交互行和列】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625111355529.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625111355529.png" /></p>
</div>
<div class="section" id="id13">
<h2>2.2电量销售数据按地理区域分组<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<p>打开文件“2014年各省市售电量.xlsx”</p>
<p>中国一般分为七个区：东北，华东，华中，华北，华南，西南和西北。</p>
<p>将省市按照七个区域分组。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625112112512.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625112112512.png" /></p>
</div>
<div class="section" id="id14">
<h2>建立地图<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<p>新建工作表，右击【维度】下【省市】——【地理角色】——【省/市/自治区】。</p>
<p>双击【省市】，点击【未知】，选择【编辑位置】。（注意，因为第七章中自定义地理编码，如果不移除会导致未知过多，点击【地图】——【地理编码】——【移除自定义地理编码】）</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625113008727.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625113008727.png" /></p>
<p>修改匹配位置，点击【确定】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625113312513.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625113312513.png" /></p>
</div>
<div class="section" id="id15">
<h2>套索选择和建组<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<p>将【省市】拖到【标签】上。</p>
<p>点击地图上的【套索选择】按钮，先框选黑龙江，吉林和辽宁三省。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/2021062511362672.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/2021062511362672.png" /></p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625113839943.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625113839943.png" /></p>
<p>套索选择后，其他省份变灰，只显示选中的省份。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625113924754.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625113924754.png" /></p>
<p>悬浮在【龙江】上，可以看见3省已选择，点击回形针标识，创建东北组。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625114600544.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625114600544.png" /></p>
<p>同样使用套索，选择山东，江苏，安徽，上海，浙江，江西，福建。选择后悬浮在其中一个省份上，点击回形针标识，创建分组华东组。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625114928650.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625114928650.png" /></p>
<p>华北组包括内蒙古，河北，山西，北京，天津。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625142341806.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625142341806.png" /></p>
<p>华中组包括河南，湖北，湖南。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625142514981.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625142514981.png" /></p>
<p>西南组包括重庆、四川和西藏。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/2021062514262163.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/2021062514262163.png" /></p>
<p>西北组包括新疆、青海、甘肃和宁夏。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625142753901.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625142753901.png" /></p>
<p>右击【省市(组)】——【编辑组】，重新命名字段名称和群组名称，点击【确定】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625143126694.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/20210625143126694.png" /></p>
<p>将【当期值】拖入【大小】。</p>
<p><img alt="Tableau%20%E5%85%AB%E3%80%81%20c9230/672d9500aa924b47b4ccee45c5bca484.png" src="Tableau%20%E5%85%AB%E3%80%81%20c9230/672d9500aa924b47b4ccee45c5bca484.png" /></p>
</div>
<div class="section" id="id16">
<h2>填充地图<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<p>新建工作表6，双击【中国地理区域】，将【同期值】拖到【颜色】，点击【颜色】——【编辑颜色】，选择【红色—蓝色发散】，勾选【倒序】。</p>
<p>将【中国地理区域】和【当期值】拖到【标签】上。</p>
<p>右击标签【总和(当期值)】——【设置格式】，【数字(自定义)】，小数位数为0，显示单位为千（K）。</p>
<p>添加说明，【标记】下空白处右击勾选【说明】，双击说明处，输入文字。</p>
<p>重命名工作表6为“各地区用电量”。【工作表】——【导出】——【图像】。</p>
</div>
<div class="section" id="id17">
<h2>各区域用电量标靶图<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<p>新建工作表7。</p>
<p>将【中国地理区域】和【省市】拖到【行】，将【当期值】拖到列。</p>
<p>将【月度计划值】拖到【详细信息】。</p>
<p>右击坐标轴——【添加参考线】。</p>
<p>选择【分布】下【分区】。</p>
<p>【计算】里选择【百分比】，修改为【50,100】，百分比类型为【总和(月度计划)】。</p>
<p>【标签】选择【无】。</p>
<p>【格式】里【线】选择黑色直线，填充不修改，点击【确定】。</p>
<p>将【中国地理区域】拖到【颜色】，将【当期值】拖到【标签】。</p>
<p>右击标签【总和(当期值)】——【设置格式】。</p>
<p>修改填充颜色：右击坐标轴下方——【编辑参考线】，选择【向下填充】，然后可以选多种填充颜色。</p>
<p>也可以同时选择【对称】和【反向】。【对称】是指颜色沿着参考线对称。</p>
<p>添加说明，【标记】下空白处右击勾选【说明】，双击说明处，输入文字。</p>
<p>重命名工作表7为“电量销售区域标靶图”。【工作表】——【导出】——【图像】。</p>
</div>
<div class="section" id="id18">
<h2>3.1数据集的相关概念<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<p>定义：集是满足某些条件的数据子集，它是维度的部分成员。</p>
<p>图标是</p>
<p>类型</p>
<p><a class="reference external" href="https://www.notion.so/da5d9735e0da44718e714553b1353e2f">Untitled</a></p>
<p>用途</p>
<ul class="simple">
<li><p>集内外成员的对比分析</p></li>
<li><p>集内部成员的对比分析</p></li>
</ul>
</div>
<div class="section" id="id19">
<h2>3.2创建数据集<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<p>导入数据“全球超市订单数据.xlsx”</p>
</div>
<div class="section" id="id20">
<h2>创建静态数据集<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<p>新建工作表8，找到负利润的国家数据集。</p>
<p>将【国家/地图】拖到【列】，将【利润】拖到【行】。</p>
<p>点击降序图标。</p>
<p>从数据开始为负数的国家开始往后选。</p>
<p>选择好后，悬浮在上面，选择创建集按钮。</p>
<p>修改集的名称，点击【确定】。</p>
<p>可见左侧【度量】下出现【集】。</p>
<p>将【市场】和【细分市场】拖到【列】中</p>
<p>将【利润】拖到【颜色】上。</p>
<p>修改【利润】的颜色，【渐变颜色】为2阶，勾选【倒序】。这样看的更清楚。</p>
<p>按ctrl键，将图表中蓝色的选出来。选好后右击【创建集】，修改集名称如下，点击【确定】。</p>
<p>右击【集】下【负利润国家2】——【编辑集】，将鼠标悬浮在每条记录的后边，会有×，如果不想要该记录，可以点击移除。</p>
<p>悬浮在列名上，也会有×，如果不想要改列，可以进行删除。</p>
<p>点击【清除工作表】。</p>
<p>将【负利润国家2】拖到【列】中，将【利润】拖到【行】中。可以看到集内外变化。</p>
<p>右击【负利润国家2】——【编辑集】，删除【市场】列，点击【应用】和【确定】。</p>
<p>发现图表无变化，因为【市场】列变化不影响数据。</p>
<p>右击【负利润国家2】——【编辑集】，删除【国家/地区】列，点击【应用】和【确定】。</p>
<p>发现数据发生变化。原因是细分市场里的【公司】和【消费者】变成了内，其他的细分市场变成了外。</p>
</div>
<div class="section" id="id21">
<h2>创建动态数据集<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h2>
<p>新建工作表9。</p>
<p>右击【维度】下【产品名称】——【创建】——【集】。</p>
<p>修改集的名称，勾选【按字段】，选择【利润】【总和】【&lt;=】【0】，点击【加载】，点击【确定】。</p>
<p>将【负利润产品】拖到【行】中，将【利润】拖到【列】中。</p>
<p>点击行中【内/外(负利润产品)】的下拉三角，选择【在集内显示成员】。</p>
</div>
<div class="section" id="id22">
<h2>通过排序方式创建动态数据集<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h2>
<p>复制工作表9，【清除工作表】，这次找销量在前100的产品。</p>
<p>右击【维度】下【产品名称】——【创建】——【集】。</p>
<p>修改集名称，选择【顶部】，勾选【按字段】，选择【顶部】【100】【数量】【总和】，就是将销量按降序排序，取前100个。点击【确定】。</p>
</div>
<div class="section" id="id23">
<h2>合并集<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h2>
<p>合并同一个维度的数据。</p>
<p>右击【负利润产品】——【创建合并集】。</p>
<p>修改集名称，左边是【负利润产品】，右边只能选择【销量TOP100】，因为两者都是从【产品名称】这个维度创建而来。</p>
<p>下面有四种选择：</p>
<ul class="simple">
<li><p>合并</p></li>
<li><p>相交</p></li>
<li><p>左交</p></li>
<li><p>右交</p></li>
</ul>
<p>选择相交，点击【确定】。</p>
</div>
<div class="section" id="id24">
<h2>通过筛选器创建数据集<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<p>将【地区】拖到【筛选器】里，勾选【南亚】【西亚】【中亚】【东亚】【东南亚】，点击【确定】。</p>
<p>右击【筛选器】下的【地区】——【创建集】。</p>
<p>修改集名称，点击【确定】。</p>
</div>
<div class="section" id="id25">
<h2>数据集用于分层结构<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h2>
<p>将【集】下【亚洲地区】拖到【维度】——【市场】上，弹出【创建分层结构】，修改分层名称，点击【确定】。</p>
</div>
<div class="section" id="id26">
<h2>3.3使用集做对比分析<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h2>
<p>将【卖情怀的产品】拖到【行】，将【利润】拖到【列】。</p>
<p>选择【行】中【卖情怀的产品】的下拉三角——【在集内显示成员】。</p>
<p>点击【显示标记标签】，显示具体标签数值。</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="chp7.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Tableau 七、多边形地图和背景图地图：设置地理信息（自定义地图码导入、设置地图源）</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="chp9.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Tableau 九、计算字段与表计算：粒度、聚合与比率</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By <a href="https://fangli-ying.github.io/">Dr. Fangli Ying</a><br/>
    
        &copy; Copyright 2022.<br/>
      <div class="extra_footer">
        Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
      </div>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>